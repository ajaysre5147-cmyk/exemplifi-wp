      - name: Setup SSH key
        run: |
          echo "=== Debug env variables ==="
          echo "EC2_IP=${{ secrets.EC2_IP }}"
          echo "Starting SSH key setup"

          mkdir -p ~/.ssh
          echo "${{ secrets.EC2_SSH_KEY }}" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa

          echo "SSH key saved to ~/.ssh/id_rsa"
          echo "Scanning host ${{ secrets.EC2_IP }}"
          ssh-keyscan -p 2222 ${{ secrets.EC2_IP }} >> ~/.ssh/known_hosts

          echo "Known hosts file:"
          cat ~/.ssh/known_hosts
